!function(){"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}!function(e){e((function(){e(".button-reset").on("click",(function(t){confirm("現在の設定はすべてテーマの初期設定値に変更されます")||t.preventDefault()}))})),e((function(){var t={"bb-config-archive-thumbnail-1":"【一覧ページのサムネイル画像】の『幅』が指定されていません","bb-config-archive-thumbnail-2":"【一覧ページのサムネイル画像】の『高さ』が指定されていません","bb-config-excerpt-length":"【記事抜粋の文字数】が指定されていません"};e("#blankblanc-config-save").on("click",(function(i){var n=[],a="";Object.keys(t).forEach((function(i){e("#"+i).val()||(e("#"+i).addClass("error"),a||(a=e("#"+i)),n.push(t[i]))})),n.length&&(i.preventDefault(),alert(n.join("\n")),a.focus())}))})),e((function(){var t="#bb-config-ja-auto-post-slug";function i(){e(t).prop("checked")?e(t+"_sub-field").fadeIn(300).css({display:"inline-block"}):e(t+"_sub-field").fadeOut(300)}i(),e(t).on("click",i)})),e((function(){e.each(["#bb-logo-image","#bb-mainvisual","#bb-mainvisual-home"],(function(t,n){var a,o=n+" ",c={reset:e(o+'input:button[name="reset"]'),select:e(o+'input:button[name="select"]'),default:e(o+'input:button[name="default"]'),delete:e(o+'input:button[name="delete"]')},l={id:e(o+".image-id"),url:e(o+".image-url"),view:e(o+".image-view")},u=l.id.val(),s=e(o+".image-view img").attr("src"),r='<span class="no-image">選択された画像はありません</span>';l.view.html()||l.view.html(r),c.reset.hide(),c.select.on("click",(function(t){t.preventDefault(),a||(a=wp.media({title:e(o+".media-title").text(),library:{type:"image"},button:{text:"画像を選択"},multiple:!1})).on("select",(function(){i=!0,a.state().get("selection").each((function(t){l.id.val(t.id),l.url.val(t.attributes.url),l.view.html('<img src="'+t.attributes.url+'" alt="">'),c.reset.show()}))})),a.open()})),c.reset.on("click",(function(t){i=!0,t.preventDefault(),u?(l.id.val(u),l.view.html('<img src="'+s+'" alt="">')):(l.id.val(""),l.view.html(r)),e(this).hide()})),c.default.on("click",(function(t){i=!0,t.preventDefault();var n=e(o+'input:hidden[name="default-image"]').val();c.reset.show(),n?(l.id.val(n),l.view.html('<img src="'+n+'" alt="">')):(l.id.val(""),l.view.html(r))})),c.delete.on("click",(function(t){i=!0,l.id.val()&&c.reset.show(),l.id.val(""),l.view.html(r)}))})),e(document).ajaxComplete((function(t,i,n){var a;try{a=n.data.split("&")}catch(t){return!1}if(-1!==e.inArray("action=add-tag",a)){var o=i.responseXML,c=e(o).find("term_id").text();"undefined"!=typeof img&&""!=c&&img.view.html(no_img)}}))})),e.ui&&e.ui.tabs&&e((function(){var t=e("#nav-tabs");"#tab"==location.hash.substring(0,4)&&(e(window).scrollTop(0),e("a",t).removeClass("nav-tab-active"),e("a[href="+location.hash+"]",t).addClass("nav-tab-active")),t.tabs({activate:function(t,i){e("a",this).removeClass("nav-tab-active"),e("a",i.newTab).addClass("nav-tab-active"),e("#bb-config-edit > form").attr("action",e("a",i.newTab).attr("href"))}})})),e.ui&&e.ui.sortable&&e((function(){e("#activate-mobile-nav").sortable({delay:200,opacity:.6,scroll:!1}).bind("sortchange",(function(){i=!0})),e("#activate-mobile-nav > li").each((function(){var t=e("input:checkbox",this);e(this).toggleClass("active",t.prop("checked")).on("click",(function(){e(this).toggleClass("active",t.prop("checked"))}))}))}));var i=!1;e(window).on("load",(function(){"object"==("undefined"==typeof tinymce?"undefined":t(tinymce))&&tinymce.editors.forEach((function(t){t.on("keyup",(function(){i=!0}))})),e([".bb-confirm-changes","#bb-config-edit form"]).each((function(){e(this).on("change",(function(){i=!0}))})),e(["#editor .editor-post-publish-button",'#bb-config-edit [type="submit"]','#addtag [type="submit"]','#edittag [type="submit"]','#submitdiv [type="submit"]']).each((function(){e(this).on("click",(function(){i=!1}))}))})),e(window).on("beforeunload",(function(){if(e("#addtag, #edittag").length&&(i=!1),i)return""})),e(window).on("load",(function(){e("#bb-config-edit, .bb-mainvisual-edit").addClass("loaded")})),e((function(){e(".activate-block-header").each((function(){var t=e(this);e('input[type="checkbox"]',this).on("click",(function(){t.next().toggleClass("active",e(this).prop("checked"))}))}))}))}(jQuery)}();